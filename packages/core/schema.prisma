// Prisma schema file for Reval
// This replaces the previous Drizzle ORM setup

generator client {
  provider = "prisma-client-js"
  output   = "./node_modules/@prisma/client"
}

datasource db {
  provider = "sqlite"
  url      = "file:../../.reval/reval.db"
}

model Run {
  id        String      @id
  name      String
  notes     String?
  function  String
  features  String      // JSON string
  target    String      // JSON string
  variants  String      // JSON string
  timestamp BigInt
  executions Execution[]

  @@map("runs")
}

model Execution {
  id       String  @id
  runId    String  @map("run_id")
  features String  // JSON string
  target   String  // JSON string
  result   String? // JSON string
  time     Float   @map("execution_time") // in milliseconds
  retries  Int
  status   String  // "success" or "error"
  variant  String  // JSON string
  
  run      Run     @relation(fields: [runId], references: [id])

  @@map("executions")
}
