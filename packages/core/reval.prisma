// Prisma schema file for Reval

generator revalClient {
  provider = "prisma-client-js"
  output   = "./node_modules/@prisma/client"
}

datasource RevalDb {
  provider = "sqlite"
  url      = "file:../../.reval/reval.db"
}

model Run {
  id         String      @id
  name       String
  notes      String?
  function   String
  timestamp  BigInt
  executions Execution[]

  @@map("runs")
}

model Execution {
  id       String @id
  run_id   String
  target   Json
  result   Json?
  time     Float
  retries  Int
  accuracy Float? @default(0)
  status   Status

  args      Json
  features  Json?
  variants  Json?
  dataIndex Int

  run  Run  @relation(fields: [run_id], references: [id], onDelete: Cascade)

  @@map("executions")
}

enum Status {
  success
  error
}
